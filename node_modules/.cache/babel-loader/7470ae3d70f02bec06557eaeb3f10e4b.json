{"ast":null,"code":"export var postComment = function postComment(dishId, rating, author, comment) {\n  return function (dispatch) {\n    var newComment = {\n      dishId: dishId,\n      rating: rating,\n      author: author,\n      comment: comment\n    };\n    newComment.date = new Date().toISOString();\n    return fetch(baseUrl + 'comments', {\n      method: 'POST',\n      body: JSON.stringify(newComment),\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'same-origin'\n    }).then(function (response) {\n      if (response.ok) {\n        return response;\n      } else {\n        var error = new Error(\"Error \" + response.status + \": \" + response.statusText);\n        error.response = response;\n        throw error;\n      }\n    }, function (error) {\n      var errmess = new Error(error.message);\n      throw errmess;\n    }).then(function (response) {\n      return response.json();\n    }).then(function (comment) {\n      return dispatch(addComment(comment));\n    }).catch(function (error) {\n      console.log('Post comments', error.message);\n      alert('Your comment might not be posted\\nError: ' + error.message);\n    });\n  };\n};","map":{"version":3,"sources":["D:\\Users\\avilchez\\aprendizaje\\PruebaReact\\Prueba_React_codigo\\front\\src\\redux\\ActionCreators.js"],"names":["postComment","dishId","rating","author","comment","dispatch","newComment","date","Date","toISOString","fetch","baseUrl","method","body","JSON","stringify","headers","credentials","then","response","ok","error","Error","status","statusText","errmess","message","json","addComment","catch","console","log","alert"],"mappings":"AAIA,OAAO,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,MAAT,EAAiBC,MAAjB,EAAyBC,OAAzB;AAAA,SAAqC,UAACC,QAAD,EAAc;AAE7E,QAAMC,UAAU,GAAG;AAClBL,MAAAA,MAAM,EAAEA,MADU;AAElBC,MAAAA,MAAM,EAAEA,MAFU;AAGlBC,MAAAA,MAAM,EAAEA,MAHU;AAIlBC,MAAAA,OAAO,EAAEA;AAJS,KAAnB;AAMAE,IAAAA,UAAU,CAACC,IAAX,GAAkB,IAAIC,IAAJ,GAAWC,WAAX,EAAlB;AACA,WAAOC,KAAK,CAACC,OAAO,GAAG,UAAX,EAAuB;AAClCC,MAAAA,MAAM,EAAC,MAD2B;AAElCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,UAAf,CAF4B;AAGlCU,MAAAA,OAAO,EAAC;AACP,wBAAgB;AADT,OAH0B;AAMlCC,MAAAA,WAAW,EAAE;AANqB,KAAvB,CAAL,CAQNC,IARM,CAQD,UAAAC,QAAQ,EAAI;AACjB,UAAGA,QAAQ,CAACC,EAAZ,EAAgB;AACf,eAAOD,QAAP;AACA,OAFD,MAEK;AACJ,YAAIE,KAAK,GAAG,IAAIC,KAAJ,CAAU,WAAWH,QAAQ,CAACI,MAApB,GAA4B,IAA5B,GAAmCJ,QAAQ,CAACK,UAAtD,CAAZ;AACAH,QAAAA,KAAK,CAACF,QAAN,GAAiBA,QAAjB;AACA,cAAME,KAAN;AACA;AACD,KAhBM,EAiBP,UAAAA,KAAK,EAAI;AACR,UAAII,OAAO,GAAG,IAAIH,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd;AACA,YAAMD,OAAN;AACA,KApBM,EAqBNP,IArBM,CAqBD,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACQ,IAAT,EAAJ;AAAA,KArBP,EAsBNT,IAtBM,CAsBA,UAAAd,OAAO;AAAA,aAAIC,QAAQ,CAACuB,UAAU,CAACxB,OAAD,CAAX,CAAZ;AAAA,KAtBP,EAuBNyB,KAvBM,CAuBA,UAAAR,KAAK,EAAI;AACfS,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA4BV,KAAK,CAACK,OAAlC;AACAM,MAAAA,KAAK,CAAC,8CAA8CX,KAAK,CAACK,OAArD,CAAL;AACA,KA1BM,CAAP;AA4BA,GArC0B;AAAA,CAApB","sourcesContent":["\r\n\r\n\r\n\r\nexport const postComment = (dishId, rating, author, comment) => (dispatch) => {\r\n\t\r\n\tconst newComment = {\r\n\t\tdishId: dishId,\r\n\t\trating: rating,\r\n\t\tauthor: author,\r\n\t\tcomment: comment\r\n\t}\r\n\tnewComment.date = new Date().toISOString();\r\n\treturn fetch(baseUrl + 'comments', {\r\n\t\tmethod:'POST',\r\n\t\tbody: JSON.stringify(newComment),\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tcredentials: 'same-origin'\r\n\t})\r\n\t.then(response => {\r\n\t\tif(response.ok) {\r\n\t\t\treturn response;\r\n\t\t}else{\r\n\t\t\tvar error = new Error(\"Error \" + response.status+ \": \" + response.statusText);\r\n\t\t\terror.response = response;\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t},\r\n\terror => {\r\n\t\tvar errmess = new Error(error.message);\r\n\t\tthrow errmess\r\n\t})\r\n\t.then(response => response.json())\r\n\t.then( comment => dispatch(addComment(comment)))\r\n\t.catch(error => {\r\n\t\tconsole.log('Post comments',error.message);\r\n\t\talert('Your comment might not be posted\\nError: ' + error.message)\r\n\t});\r\n\t\r\n};"]},"metadata":{},"sourceType":"module"}